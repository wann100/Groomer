<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>HeadWay Mobile App-Edit My Profile</title>

    <!-- Bootstrap -->
    <link href="statics/css/bootstrap.min.css" rel="stylesheet">
    <link href="statics/css/custom.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
      <script>
       function getLocation(){
		var geo;
	    if(navigator && navigator.geolocation){
			navigator.geolocation.getCurrentPosition(showPosition);

		}
		else{
			console.log('Geolocation is not supported');
		}


  }

  function showPosition(position){
    geo =position.coords;
	document.getElementById("location").value  = "["+geo.latitude+ "," + geo.longitude + "]";
  }
  </script>
    <script>
$( document ).ready(function() {
	$( "#serviceButton" ).click(function( event ) {
		var str;
		str = addService()
		$("#services").append(str).trigger('create');
		//alert(str);
	});
});
</script>

<script>
$(document).on("pageshow", "", function() {
	$("#editForm").validate();
});
</script>
<script src="/statics/js/jquery.validate.js"></script>
  </head>
  <body>
  	<center>
      	   <nav class="navbar homenav">
          <div class="container-fluid col-xs-12  col-sm-12 col-lg-12" >
                                	<a href="/MainPage"  class="btn btn-default glyphicon glyphicon-home" style="  color:white; position:absolute;top:2px;left:2px; background:rgb(57,57,57)!important"rel="external" > HOME</a>
                    	
            <img  alt="HeadWay Logo" class="img-responsive" src="../statics/whole_logo.png"  style="width:60%; top:0px;left:0px;">
               <a href="javascript:history.back(1)" class="btn btn-default glyphicon  glyphicon-arrow-left " data-rel="back" style="color:white; position:absolute;top:2px;right:2px; background:rgb(57,57,57)!important"rel="external" ></a>
          	</div>
       </nav>
		</center>
      <nav class="navbar navbar-default bottomhomenav">
        <div class="container-fluid bottomhomenav">
          <div class="navbar-header bottomhomenav">
            <button type="button" class="navbar-toggle" style="position:absolute;left:0px;" data-toggle="collapse" data-target="#myNavbar">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <center>
            <h4 style="color:white"><span class="glyphicon glyphicon-pencil"></span> edit my information</h4>
            </center>
          </div>
          <div class="collapse navbar-collapse bottomhomenav" id="myNavbar">
           	<center>
              <ul class="nav navbar-nav">
                <li class="active btn-xl" style="">
                <script>

  function getLocation(){
		var geo;
	    if(navigator && navigator.geolocation){
			navigator.geolocation.getCurrentPosition(showPosition);
			
		}
		else{
			console.log('Geolocation is not supported');
		}
	
    
  }

  function showPosition(position){
    geo =position.coords;
	document.getElementById("location").value  = "["+geo.latitude+ "," + geo.longitude + "]";
  }
  </script>
                   <form   method="post"  onSubmit="getLocation()" action="/map" style="color:white;">
		<center>
 <button    class=" button-effect btn-block dropdown-toggle"type="submit"  style="color:black; box-shadow:none; border:none;padding: 10px 15px;"><span class="glyphicon glyphicon-search"></span>Find A Hair Professional</button>
        </center>
          <label style="visibility:hidden" for="location" >Location:</label>
          <input  type="text" name="location" style="color:black; visibility:hidden" id="location" />
         <script>
 		  	getLocation();

			</script>
    
        
          <label for="range" style="visibility:hidden">Range in Miles:</label>
				<input id="range"  name="range"type="text" data-slider-min="0.0" data-slider-max="50" data-slider-step="5" data-slider-value="25.0" style="display: none; visibility:hidden" data-value="14" value="50.0">


        <label for="rating" style="visibility:hidden">Minimum Rating:</label>
        <input  name="rating" id="rating"type="text" data-slider-min="0" data-slider-max="5" data-slider-step="1" data-slider-value="3" style="display: none; visibility:hidden" data-value="14" value="3.0"/> 
        
        </form>
                </li>
							</ul>
            </center>    
          </div>
        </div>
        <br/>
       		 <center>
				<form class="form-signin"  method="post" action="/saveBarber" id="editFrom" style="padding-bottom:20px;">
          <label for="firstName" >First Name</label>
        <input type="text" class=" form-control" name="firstName" id="firstName" value="{{ firstName }}"required autofocus  />
        <label for="lastName">Last Name </label>
        <input type="text" class=" form-control" name="lastName" id="lastName" value="{{ lastName }}" required autofocus />
        <label for="aboutMe">Tell us about Yourself </label>
        <input type="text" class=" form-control" name="aboutMe" id="aboutMe" value="{{ lastName }}" required autofocus />
        <label for="shopName">Shop Name: </label>
        <input type="text" class="form-control" name="shopName" id="shopName" value="{{ lastName }}" required autofocus  />
			<label for="email">Email: </label>
        <input type="email" id="email" class="form-control" placeholder="Email address" value="{{ email}}"  required autofocus  readonly >
        		<label for="street">Street Address: </label>
        <input type="text" name="street" id="street" value="{{ street}}"  class="form-control" placeholder=" Street Address" required autofocus>
       
      <label for="phone">Phone:</label>
      <input type="text" class="form-control" name="phone" id="phone" value="{{ phone }}" required autofocus />
     
 
   
   
      <label for="city">City:</label>
      <input type="text" class="form-control" name="city" id="city" value="{{ city }}"required autofocus  />
 		 <div  data-role="fieldcontain" style="margin-left:5px">
         
      {{ states }}
      </div>
		
        
     <br/>
     <br/>
     
	<div id="services" data-role="fieldcontain" >
    
        <script>
		document.getElementById('services').innerHTML = '{{ services }}';
        var serviceNum = parseInt("{{ serviceNum }}");
        var serviceList = ['Haircuts/Trims','Shades','Tapers','Brush Cuts','Design Haircuts','Clipper Shaves','Razor Shaves','Edge Shape Ups','Facial Trims','Eyebrow Arches','Neck Tapers','Shampoo','Conditionings','Natural Dyes','Beard Trims','Strengthening Therapies','Relaxers','Twists','Braids','Curls','Locs','Perms','Weaves','Extensions','Coloring Highlights','Updos','Formal Hairstyles'];
        
        function addService()
        {
            var allServices = "";
		if(serviceNum == 0){
			serviceNum = 1
		}
      for (var i = 0; i < serviceNum-1; i++)
            {
                allServices+= '<div><center><div   data-role="fieldcontain"><label for="service'+(i+1)+'">Service #'+(i+1)+': </label>\n';
                allServices+='<select class="form-control"  style="color:black" name="service'+(i+1)+'" id="service'+(i+1)+'">';
                for (var i2 = 0; i2 < serviceList.length; i2++)
                    if (serviceList[i2] == document.getElementById("service"+(i+1)).value)
                        allServices+='<option selected>'+serviceList[i2]+'</option>';
                    else
                        allServices+='<option>'+serviceList[i2]+'</option>';
                allServices+='</select></div><div data-role="fieldcontain"><label for="price'+(i+1)+'"> Price: </label>';
                allServices+='<input  type="number" class="required number form-control" name="price'+(i+1)+'" id="price'+(i+1)+'" value="'+document.getElementById("price"+(i+1)).value+'"required/>';
                allServices+='</div> <br /> <button type="button" class="form-control registerbutton" onClick="removeService('+(i+1)+');">Remove</button>';
                allServices+=' </center><br /> '
            }
            var newService = '<center><div > <div   data-role="fieldcontain"><label for="service'+serviceNum+'">Service #'+serviceNum+': </label>\n';
            newService+='<select class="form-control"  style="color:black;" name="service'+serviceNum+'" id="service'+serviceNum+'">'
            for (var i = 0; i < serviceList.length+1; i++)
                newService+='<option  class="form-control" >'+serviceList[i]+'</option>';
            newService+='</select></div><div data-role="fieldcontain"><label for="price'+serviceNum+'"> Price: </label>';
            newService+='<input   type="number" class="required number form-control" name="price'+serviceNum+'" id="price'+serviceNum+'" required/>';
            newService+='</div><br />  <button type="button"  class="form-control registerbutton"onClick="removeService('+serviceNum+');">Remove</button> <br /></div></center> ';
            
			document.getElementById('services').innerHTML = allServices+newService+'<br />';
            document.getElementById('serviceNum').value = serviceNum;
            serviceNum++;
			$("#services").trigger("create");
			return newService+'<br />';
			
        }
        function removeService(num)
        {
            var allServices = "";
            var curService = 1;
            for (var i = 0; i < serviceNum-1; i++)
            {
                if (i+1!=num)
                {
                    allServices+= '<center><div   data-role="fieldcontain"><label for="service'+curService+'">Service #'+curService+': </label>\n';
                    allServices+='<select class="form-control"  style="color:black;" name="service'+curService+'" id="service'+curService+'">';
                    for (var i2 = 0; i2 < serviceList.length; i2++)
                        if (serviceList[i2] == document.getElementById("service"+(i+1)).value)
                            allServices+='<option selected>'+serviceList[i2]+'</option>';
                        else
                            allServices+='<option  class="form-control" >'+serviceList[i2]+'</option>';
                    allServices+='</select></div><div data-role="fieldcontain"><label for="price'+curService+'"> Price: </label>';
                    allServices+='<input class="required number form-control" name="price'+curService+'" id="price'+curService+'" value="';
                    allServices+=document.getElementById("price"+(i+1)).value+'"/>';
                    allServices+='</div> <br/> <button type="button"  class="form-control registerbutton" onClick="removeService('+curService+');">Remove</button>';
                    allServices+='<br /></center>'
                    curService++;
                }
            }

            serviceNum--;
            document.getElementById('services').innerHTML = allServices;
            document.getElementById('serviceNum').value = (serviceNum-1);
			$("#services").trigger("create");
        }
        </script>
       </div>
        <div style="position:fixed; left: -800px;">
        <input readonly id="serviceNum" name="serviceNum" type="number" value="{{serviceInput}}"/>
        </div> 

      <br/>
	  
      <button type="button"  style="border:none; width:90%" class=" btn btn-lg  btn-block registerbutton"id="serviceButton" onclick="addService()">Add A Service</button>
      
   		<br/>
     <br/>
        <label> </label>
      <button class="btn btn-lg  btn-block registerbutton"  style="background-color:rgb(78,110,128); width:90% " type="submit">Update</button>
      <label> </label>
         <fieldset data-role="controlgroup">
          <legend></legend>
        </fieldset>
      </form>
   </center>
   </div>
           <div class="container" style="position:absolute; bottom:0% ;right:30% ;">


            Copyright 2016 &reg; Conssol LLC.</div>
     </nav>  

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="statics/js/bootstrap.min.js"></script>
  </body>
</html>